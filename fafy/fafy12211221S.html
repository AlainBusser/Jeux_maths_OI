<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<style>
table {
    border-radius: 32px;
    background: rgb(160,96,64);
    box-shadow: 8px 5px 13px gray;
}
table td {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    font-size: 48px;
    text-align: center;
    text-shadow: 4px 2px 6px black;
    border: 4px solid rgb(160,96,64);
}
.rouge {
    background: radial-gradient(pink 0, red 75%, black 100%);
}
.vert {
    background: radial-gradient(lightgreen 0, green, black 100%);
}

	</style>
</head>
<body>
<p>Nord ←</p>
<table>
<tbody><tr>
<td id="t0" onclick="jouer(0)" class="vert">⠂</td>
<td id="t1" onclick="jouer(1)" class="vert">⠔</td>
<td id="t2" onclick="jouer(2)" class="vert">⠔</td>
<td id="t3" onclick="jouer(3)" class="vert">⠂</td>
<td id="t4" onclick="jouer(4)" class="vert">⠂</td>
<td id="t5" onclick="jouer(5)" class="vert">⠔</td>
<td id="t6" onclick="jouer(6)" class="rouge">⠔</td>
<td id="t7" onclick="jouer(7)" class="rouge">⠂</td>
</tr>
</tbody></table>
<p>Sud →</p>
<h2>C'est à <code id="tourjeu">Sud</code> de jouer</h2>
<h3>entropie  <progress id="visuS" max="300" value="250"></progress> <code id="entropie">2,5</code> </h3>

<script>
const N = 8
const dessin = ["⠀","⠂","⠔","⠕","⠶","⠷","⠿"]
const nombre = {"⠀":0, "⠂":1, "⠔":2, "⠕":3, "⠶":4, "⠷":5, "⠿":6 }
const nom = {"-1": "Nord","1": "Sud" }
let joueur = 1
const xlogx = function(x) {
	if (x===0) return 0
	return x*Math.log2(x)
}
const entropy = function() {
	let S = 0
	for (let i=0;i<N;i++) {
		S -= xlogx(parseFloat(nombre[di("t"+i).innerHTML])/12)
	}
	di("entropie").innerHTML = S.toLocaleString()
	di("visuS").value = Math.floor(100*S)
}
const di = nom => document.getElementById(nom)
const nbgraines = i => parseInt(nombre[di("t"+i).innerHTML])
const jouable = function(j,i) {
        if (nbgraines(i)==0) return false
        if (i+j*nbgraines(i)<0) return false
        if (i+j*nbgraines(i)>=N) return false
        for (let k=1; k<=nbgraines(i); k += 1) {
            if (nbgraines(i+j*k)==0) return false
        }
        return true
    }
const colorier = function() {
	for (i=0; i<N; i++) di("t"+i).className = "rouge"
	for (i=0; i<N; i++) {
		if (jouable(joueur,i)) di("t"+i).className = "vert"
	}
	entropy()
}
const jouer = function(i) {
	if (jouable(joueur,i)) {
		for (n=nbgraines(i),k=i+joueur; n>0; n--,k+=joueur) {
			di("t"+k).innerHTML = dessin[nbgraines(k)+1]
		} 
		di("t"+i).innerHTML = dessin[0]
		joueur = -joueur
		di("tourjeu").innerHTML = nom[joueur]
		colorier()
	}
}

colorier()
</script>







</body></html>